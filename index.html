<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>P.S. Telicom - Wholesale</title>
<style>
:root{
  --blue:#2874f0;
  --red:#e53935;
  --green:#4caf50;
  --bg:#f5f6fa;
}
body{margin:0;font-family:Arial,sans-serif;background:var(--bg);}
header{
  background:#fff;display:flex;align-items:center;justify-content:space-between;
  padding:14px 20px;position:sticky;top:0;z-index:10;border-bottom:1px solid #ccc;
}
header .title{font-size:28px;font-weight:bold;color:var(--blue);}
header input{width:40%;padding:10px;border-radius:8px;border:1px solid #bbb;}
header .cart-btn{background:var(--blue);color:#fff;padding:10px 18px;border-radius:8px;cursor:pointer;position:relative;font-weight:bold;}

.categories{
  display:grid;
  grid-template-columns:repeat(3,1fr); /* 3 per row */
  gap:12px;
  padding:16px;
  justify-items:center;
}
.category{background:#fff;border-radius:12px;padding:10px;text-align:center;cursor:pointer;border:1px solid #ddd;}
.category img{width:100px;height:100px;object-fit:cover;border-radius:12px;}
.category span{display:block;margin-top:6px;font-weight:bold;}

.products{
  display:grid;
  grid-template-columns:repeat(2,1fr); /* 2 products per row */
  gap:16px;
  padding:16px;
}
.product{background:#fff;padding:10px;border-radius:12px;position:relative;}
.product img{width:100%;height:150px;object-fit:cover;border-radius:12px;} 
.product h3{margin:6px 0 4px 0;font-size:15px;}
.product b{display:block;margin-bottom:6px;color:var(--green);}
.out{opacity:0.5;pointer-events:none;}
.badge{background:var(--red);color:#fff;padding:4px 6px;font-size:12px;border-radius:6px;position:absolute;top:6px;left:6px;}
.min-badge{background:#ff9800;color:#fff;padding:4px 6px;font-size:12px;border-radius:6px;position:absolute;top:6px;right:6px;}

.qty-row{display:flex;align-items:center;margin-top:8px;gap:8px;}
.qty-row button{width:32px;height:32px;font-size:16px;border:none;border-radius:6px;background:var(--blue);color:#fff;cursor:pointer;}
.qty-row .qty-display{min-width:40px;text-align:center;font-weight:bold;color:var(--blue);}
.cart-qty{background:var(--green);color:#fff;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:bold;margin-left:4px;}

/* CART FULLSCREEN POPUP */
#cartPopup{
  display:none;
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);
  z-index:100;
}
#cartContent{
  background:#fff;width:90%;height:90%;border-radius:12px;overflow-y:auto;padding:16px;
  position:relative;
  margin:20px auto;
}
#cartContent .closeBtn{position:absolute;top:12px;right:12px;background:var(--red);color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;}
.cart-item{display:flex;align-items:center;gap:12px;border-bottom:1px solid #eee;padding:12px 0;}
.cart-item img{width:70px;height:70px;object-fit:cover;border-radius:6px;}
.cart-item-info{flex:1;}
.cart-item-info .name{font-weight:bold;margin-bottom:4px;}
.cart-item-info .price{color:var(--green);margin-bottom:6px;}
.cart-qty-row{display:flex;align-items:center;gap:8px;}
.cart-qty-row button{width:28px;height:28px;font-size:14px;border:none;border-radius:4px;background:var(--blue);color:#fff;cursor:pointer;}
.cart-qty-row .remove-btn{background:var(--red);}
.cart-qty-row input{width:50px;height:28px;text-align:center;border:1px solid #ccc;border-radius:4px;font-size:14px;}
.cart-item-info .min-warn{color:var(--red);font-size:12px;margin-top:4px;display:none;}
.warning{text-align:center;color:var(--red);font-weight:bold;display:none;margin-top:10px;}
button.whatsapp-btn{width:100%;padding:12px;margin-top:10px;background:#25d366;color:#fff;border:none;border-radius:6px;font-weight:bold;cursor:pointer;font-size:16px;}
</style>
</head>
<body>

<header>
  <div class="title">P.S. Telicom</div>
  <input id="search" placeholder="Search..." onkeyup="filterProducts()">
  <div class="cart-btn" onclick="openCart()">Cart ðŸ›’ <span id="cartCount">0</span></div>
</header>

<p style="text-align:center;color:#444;margin:10px 0;font-weight:bold;">Minimum Order â‚¹5,000</p>

<!-- Categories -->
<div class="categories" id="catBox"></div>

<!-- Products -->
<div class="products" id="productBox"></div>

<!-- Cart Fullscreen Popup -->
<div id="cartPopup">
  <div id="cartContent">
    <button class="closeBtn" onclick="closeCart()">Close âœ–</button>
    <h3>Cart Items</h3>
    <div id="cartItems"></div>
    <div id="cartTotal" style="font-weight:bold;margin-top:10px;">Total: â‚¹0</div>
    <p class="warning" id="warn">Minimum Order â‚¹5000 Required!</p>
    <button class="whatsapp-btn" onclick="sendOrder()">Send Order via WhatsApp</button>
  </div>
</div>

<!-- Simple Login -->
<div id="loginModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.4);z-index:200;align-items:center;justify-content:center;">
  <div style="background:#fff;padding:20px;border-radius:10px;width:300px;">
    <h3>Login</h3>
    <input id="nameInput" placeholder="Your Name" style="width:100%;padding:8px;margin:6px 0;">
    <input id="phoneInput" placeholder="Phone (91XXXXXXXXXX)" style="width:100%;padding:8px;margin:6px 0;">
    <div style="text-align:right;margin-top:10px;">
      <button onclick="closeLogin()">Cancel</button>
      <button onclick="saveLogin()">Login</button>
    </div>
  </div>
</div>

<script>
// Categories
const categories=[
  {name:"Adapter",img:"https://via.placeholder.com/100"},
  {name:"Cable",img:"https://via.placeholder.com/100"},
  {name:"Earbuds",img:"https://via.placeholder.com/100"},
  {name:"Speakers",img:"https://via.placeholder.com/100"},
  {name:"Battery",img:"https://via.placeholder.com/100"},
  {name:"Charger",img:"https://via.placeholder.com/100"},
  {name:"Smartwatch",img:"https://via.placeholder.com/100"},
  {name:"Covers",img:"https://via.placeholder.com/100"},
  {name:"OTG",img:"https://via.placeholder.com/100"},
  {name:"Others",img:"https://via.placeholder.com/100"},
];

let products=[
  {id:1,name:"Samsung travel adapter",price:60,stock:true,min:5,category:"adapter",img:"https://i.ibb.co/HTVKLGy8/Screenshot-2025-1204-080242-com-whatsapp-w4b.png"},
  {id:2,name:"Data cable 6a ,v8",price:12,stock:true,min:12,category:"cable",img:"https://i.ibb.co/prvZD2S5/Screenshot-2025-1204-080252-com-whatsapp-w4b.png"},
  {id:3,name:"Pannu 7 hour airbuds",price:150,stock:true,min:1,category:"airpods",img:"https://i.ibb.co/whfQGhHc/Screenshot-2025-1204-080299-com-whatsapp-w4b.png"},
  {id:4,name:"Bestie airbuds",price:210,min:1,stock:true,category:"airpods",img:"https://i.ibb.co/bgTDt4hV/Screenshot-2025-1204-080306-com-whatsapp-w4b.png"},
  {id:5,name:"pubg sleeps",price:3,min:100,stock:true,category:"other",img:"https://i.ibb.co/LbgLHzG/Screenshot-2025-1204-080313-com-whatsapp-w4b.png"},
  {id:6,name:"Earphones",price:13,min:20,stock:true,category:"earphone",img:"https://i.ibb.co/gML9NjLc/Screenshot-2025-1204-080320-com-whatsapp-w4b.png"},
  {id:7,name:"Nokia battery",price:50,stock:true,min:1,category:"other",img:"https://i.ibb.co/0j9pKqP2/Screenshot-2025-1204-080326-com-whatsapp-w4b.png"},
  {id:8,name:"Peramid Mobile stand",price:2.5,stock:true,min:50,category:"other",img:"https://i.ibb.co/XrfNh0vz/Screenshot-2025-1204-080332-com-whatsapp-w4b.png"},
  {id:9,name:"Earphones",price:20,stock:true,min:1,category:"earphone",img:"https://i.ibb.co/6RWCY968/Screenshot-2025-1204-080342-com-whatsapp-w4b.png"},
  {id:10,name:"Pannu bluetooth neckband pibt 8001",price:100,stock:true,min:1,category:"earphone",img:"https://i.ibb.co/qYYk7Hch/Screenshot-2025-1204-080349-com-whatsapp-w4b.png"},
];

let cart={},user=null;

// Render Categories
const catBox=document.getElementById("catBox");
categories.forEach(c=>{
  let div=document.createElement("div");
  div.className="category";
  div.innerHTML=`<img src="${c.img}"><span>${c.name}</span>`;
  div.onclick=()=> filterCategory(c.name);
  catBox.appendChild(div);
});

// Render Products
function renderProducts(filter="All"){
  const container=document.getElementById("productBox");
  container.innerHTML="";
  products.forEach(p=>{
    if(filter!=="All" && p.category!==filter) return;
    let qty=cart[p.id]?.qty||0;
    const div=document.createElement("div");
    div.className="product"+(!p.stock?" out":"");
    div.innerHTML=`
      <img src="${p.img}">
      ${p.min>1?`<div class="min-badge">Min: ${p.min}</div>`:''}
      <h3>${p.name}</h3>
      <b>â‚¹${p.price}</b>
      ${!p.stock?'<div class="badge">OUT OF STOCK</div>':`
      <div class="qty-row">
        <button onclick="removeFromCart(${p.id})">-</button>
        <span class="qty-display">${qty>0?qty+' <span class="cart-qty">in cart</span>':''}</span>
        <button onclick="addToCart(${p.id})">+</button>
      </div>`}`;
    container.appendChild(div);
  });
}
renderProducts();

// Search
function filterProducts(){
  const q=document.getElementById("search").value.toLowerCase();
  document.querySelectorAll(".product").forEach(p=>{
    p.style.display=p.innerText.toLowerCase().includes(q)?"block":"none";
  });
}

// Category filter
function filterCategory(cat){
  renderProducts(cat);
}

// Cart functions - Simple add/remove
function addToCart(id){
  const p=products.find(x=>x.id===id);
  if(!p.stock) return;
  
  if(!cart[id]){
    // First time adding to cart - add minimum quantity
    cart[id]={name:p.name,price:p.price,qty:p.min,img:p.img,min:p.min};
  }else{
    // Already in cart - increase by 1
    cart[id].qty++;
  }
  
  updateCart();
  renderProducts();
}

function removeFromCart(id){
  if(cart[id]){
    // Remove item completely from cart
    delete cart[id];
    updateCart();
    renderProducts();
  }
}

// Update Cart popup
function updateCart(){
  const cartItems=document.getElementById("cartItems");
  cartItems.innerHTML="";
  let total=0,count=0;
  
  for(let id in cart){
    let i=cart[id];
    total+=i.qty*i.price;
    count+=i.qty;
    
    cartItems.innerHTML+=`
      <div class="cart-item">
        <img src="${i.img}">
        <div class="cart-item-info">
          <div class="name">${i.name}</div>
          <div class="price">â‚¹${i.price} per piece</div>
          <div class="cart-qty-row">
            <button class="remove-btn" onclick="removeFromCart(${id})">âœ–</button>
            <input type="number" min="${i.min}" value="${i.qty}" id="cart-qty-${id}" onchange="updateCartItem(${id}, this.value)">
            <button onclick="addToCart(${id})">+</button>
          </div>
          <div>Subtotal: â‚¹${i.qty*i.price}</div>
        </div>
      </div>`;
  }
  
  document.getElementById("cartCount").innerText=count;
  document.getElementById("cartTotal").innerText="Total: â‚¹"+total;
  document.getElementById("warn").style.display=total<5000?"block":"none";
}

// Update cart item quantity from input
function updateCartItem(id,newQty){
  newQty=parseInt(newQty)||0;
  const p=products.find(x=>x.id===id);
  
  if(newQty < p.min){
    alert(`Minimum quantity is ${p.min} for ${p.name}`);
    newQty = p.min;
  }
  
  if(newQty <= 0){
    delete cart[id];
  }else{
    cart[id].qty = newQty;
  }
  
  updateCart();
  renderProducts();
}

// Open / Close Cart
function openCart(){ 
  updateCart(); 
  document.getElementById("cartPopup").style.display="flex"; 
}
function closeCart(){ 
  document.getElementById("cartPopup").style.display="none"; 
}

// WhatsApp Order
function sendOrder(){
  if(!user){ alert("Please login first!"); openLogin(); return; }
  
  let total=0;
  let msg=`*P.S. Telicom Order*\n\n`;
  msg+=`*Customer Details:*\n`;
  msg+=`Name: ${user.name}\n`;
  msg+=`Phone: ${user.phone}\n\n`;
  msg+=`*Order Items:*\n`;
  
  for(let id in cart){
    let i=cart[id];
    msg+=`\nðŸ“¦ ${i.name}\n`;
    msg+=`   Quantity: ${i.qty}\n`;
    msg+=`   Price: â‚¹${i.price} per piece\n`;
    msg+=`   Subtotal: â‚¹${i.qty*i.price}\n`;
    total+=i.price*i.qty;
  }
  
  msg+=`\n*Order Summary:*\n`;
  msg+=`Total Items: ${Object.keys(cart).length}\n`;
  msg+=`Total Quantity: ${Object.values(cart).reduce((sum,item)=>sum+item.qty,0)}\n`;
  msg+=`*Grand Total: â‚¹${total}*\n\n`;
  msg+=`_Images of products are attached_\n`;
  msg+=`_Minimum order requirement: â‚¹5000_`;
  
  if(total<5000){ 
    alert("Minimum order â‚¹5000 required!"); 
    return; 
  }
  
  let number="917643806356"; // Replace with your WhatsApp number
  let whatsappUrl=`https://wa.me/${number}?text=${encodeURIComponent(msg)}`;
  window.open(whatsappUrl,"_blank");
}

// Simple Login
function openLogin(){ document.getElementById("loginModal").style.display="flex"; }
function closeLogin(){ document.getElementById("loginModal").style.display="none"; }
function saveLogin(){
  const name=document.getElementById("nameInput").value.trim();
  const phone=document.getElementById("phoneInput").value.trim();
  if(!name||!phone){ alert("Both required"); return; }
  user={name,phone};
  localStorage.setItem("ps_user",JSON.stringify(user));
  closeLogin();
}

window.onload=()=>{
  const u=JSON.parse(localStorage.getItem("ps_user")||"null");
  if(u) user=u;
};
</script>

</body>
</html>
